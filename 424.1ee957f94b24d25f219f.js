"use strict";(self.webpackChunkadmincarrito=self.webpackChunkadmincarrito||[]).push([[424],{5424:(st,M,r)=>{r.r(M),r.d(M,{CategoriaModule:()=>mt});var A=r(8583),b=r(4655),N=r(4457),C=r(1494),g=r(2789),O=r(9765),y=r(6782),u=r(2340),l=r(3679),m=r(2238),t=r(7716),w=r(6223),E=r(205),_=r(5304),U=r(1841);let S=(()=>{class o{constructor(e){this.http=e}newImgCategoria(e){return this.http.post(`${u.N.API_URL}/img-categoria/uploadImg`,e).pipe((0,_.K)(this.handlerError))}updateImgCategoria(e,a){return this.http.put(`${u.N.API_URL}/img-categoria/${e}`,a).pipe((0,_.K)(this.handlerError))}deleteImgCategoria(e){return this.http.delete(`${u.N.API_URL}/categoria/delete/${e}`).pipe((0,_.K)(this.handlerError))}handlerError(e){let a="Error desconocido";return e&&(a=`Error ${e.message}`),window.alert(a),(0,E._)(a)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(U.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var v=r(8295),F=r(9983),x=r(3738),I=r(1095);function q(o,n){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.getErrorMessage("nombre")," ")}}function D(o,n){1&o&&t._UZ(0,"mat-card-content",15)}function L(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"input",16,17),t.NdJ("change",function(i){return t.CHM(e),t.oxw().seleccionarImagen(i)}),t.qZA(),t.TgZ(2,"img",18),t.NdJ("click",function(){return t.CHM(e),t.MAs(1).click()}),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("src",e.imagenSelect||"assets/image.png",t.LSH)}}function Y(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"input",16,17),t.NdJ("change",function(i){return t.CHM(e),t.oxw().seleccionarImagen(i)}),t.qZA(),t.TgZ(2,"img",18),t.NdJ("click",function(){return t.CHM(e),t.MAs(1).click()}),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("src",e.imagenSelect||e.URL,t.LSH)}}function P(o,n){1&o&&t._UZ(0,"mat-dialog-actions")}function k(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t._uU(1,"Cancelar"),t.qZA(),t.TgZ(2,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSave()}),t._uU(3,"Guardar"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("mat-dialog-close",!0)("disabled",!e.categoriaForm.valid||!e.imgCategoriaForm.valid)}}function J(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t._uU(1,"Cancelar"),t.qZA(),t.TgZ(2,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSave()}),t._uU(3,"Guardar"),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("mat-dialog-close",!0)("disabled",!e.categoriaForm.valid)}}var s=(()=>{return(o=s||(s={})).EDIT="edit",o.NEW="new",s;var o})();let R=(()=>{class o{constructor(e,a,i){this.data=e,this.categoriaService=a,this.imgCategoriaService=i,this.actionTODO=s.NEW,this.formBuilder=new l.qu,this.categoriaForm=this.formBuilder.group({nombre:["",[l.kI.required]]}),this.imgCategoriaForm=this.formBuilder.group({file:["",[l.kI.required]],categoria:["",[]]})}ngOnInit(){var e,a,i;(null===(e=this.data)||void 0===e?void 0:e.categorias.hasOwnProperty("idcategoria"))&&(this.actionTODO=s.EDIT,this.data.title="Actualizaci\xf3n categoria",setTimeout(()=>{this.pathForData()},0),this.URL=`${u.N.API_URL}/img-categoria/`+(null===(i=null===(a=this.data)||void 0===a?void 0:a.categorias)||void 0===i?void 0:i.imgcategorias[0].nombreimgcategoria))}seleccionarImagen(e){if(e.target.files&&e.target.files[0]){this.file=e.target.files[0];const a=new FileReader;a.onload=i=>this.imagenSelect=a.result,a.readAsDataURL(this.file)}}onSave(){var e,a,i,c;const d=this.categoriaForm.value,h=this.imgCategoriaForm.value;if(this.actionTODO===s.NEW)this.categoriaService.newCategoria(d).subscribe(f=>{console.log("nuevo",f),h.categoria=f.idcategoria;const p=new FormData;p.append("file",this.file),p.append("categoria",h.categoria),this.imgCategoriaService.newImgCategoria(p).subscribe(Z=>{})}),this.categoriaService.filter("Registro categoria img");else{const f=null===(a=null===(e=this.data)||void 0===e?void 0:e.categorias)||void 0===a?void 0:a.idcategoria,p=null===(c=null===(i=this.data)||void 0===i?void 0:i.categorias)||void 0===c?void 0:c.imgcategorias[0].idimgcategoria;this.categoriaService.updateCategoria(f,d).subscribe(T=>{console.log("Actualizado categoria",T)});const Z=new FormData;Z.append("file",this.file),this.imgCategoriaService.updateImgCategoria(p,Z).subscribe(T=>{console.log("Actualizado imgcategoria",T)}),this.categoriaService.filter("Registro categoria img")}}isValidField(e){return(this.categoriaForm.get(e).touched||this.categoriaForm.get(e).dirty)&&!this.categoriaForm.get(e).valid}getErrorMessage(e){var a;let i;return this.categoriaForm.get(e).errors.required?i=" Este campo es requerido":this.categoriaForm.get(e).hasError("pattern")?i="No es correo v\xe1lido":this.categoriaForm.get(e).hasError("minlength")&&(i=`Este campo requiere un m\xednimo de ${null===(a=this.categoriaForm.get(e).errors)||void 0===a?void 0:a.minlength.requiredLength} caracteres`),i}checkField(e){return this.isValidField(e)}isValidFieldLogin(e){return(this.imgCategoriaForm.get(e).touched||this.imgCategoriaForm.get(e).dirty)&&!this.imgCategoriaForm.get(e).valid}getErrorMessageLogin(e){var a;let i;return this.imgCategoriaForm.get(e).errors.required?i=" Este campo es requerido":this.imgCategoriaForm.get(e).hasError("pattern")?i="No es correo v\xe1lido":this.imgCategoriaForm.get(e).hasError("minlength")&&(i=`Este campo requiere un m\xednimo de ${null===(a=this.imgCategoriaForm.get(e).errors)||void 0===a?void 0:a.minlength.requiredLength} caracteres`),i}checkFieldLogin(e){return this.isValidFieldLogin(e)}pathForData(){var e,a;this.categoriaForm.patchValue({nombre:null===(a=null===(e=this.data)||void 0===e?void 0:e.categorias)||void 0===a?void 0:a.nombre}),this.imgCategoriaForm.patchValue({})}mayus(e){e.value=e.value.toUpperCase()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.WI),t.Y36(w.n),t.Y36(S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modalcategoria"]],decls:25,vars:10,consts:[["mat-dialog-title",""],[1,"modal-form"],[3,"formGroup"],[1,"full-width-input"],["formControlName","nombre","matInput","","placeholder","Nombres","id","nombrecate","oninput","this.value=this.value.toUpperCase()","required",""],[4,"ngIf"],[1,"container-input-file"],[1,"header-image"],["class","content-image",4,"ngIf","ngIfThen","ngIfElse"],["crearNuevoCategoria",""],["editarCategoria",""],[4,"ngIf","ngIfThen","ngIfElse"],["class","btn-actions"],["crearNewCategoria",""],["editarCategorias",""],[1,"content-image"],["type","file","formControlName","file","accept","image/*",3,"change"],["imageInput",""],["alt","No Image",1,"img-fluid",3,"src","click"],["mat-button","","mat-dialog-close","",1,"btn-actionsCancel"],["mat-raised-button","","color","primary","ckdFocusInitial","",1,"btn-actionsSave",3,"mat-dialog-close","disabled","click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",4),t.YNc(7,q,2,1,"mat-error",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",1),t.TgZ(9,"form",2),t.TgZ(10,"div",6),t.TgZ(11,"mat-card"),t.TgZ(12,"div",7),t.TgZ(13,"mat-card-header"),t._uU(14,"Inserta imagen"),t.qZA(),t.qZA(),t.YNc(15,D,1,0,"mat-card-content",8),t.qZA(),t.YNc(16,L,3,1,"ng-template",null,9,t.W1O),t.YNc(18,Y,3,1,"ng-template",null,10,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(20,P,1,0,"mat-dialog-actions",11),t.YNc(21,k,4,2,"ng-template",12,13,t.W1O),t.YNc(23,J,4,2,"ng-template",12,14,t.W1O)),2&e){const i=t.MAs(17),c=t.MAs(19),d=t.MAs(22),h=t.MAs(24);t.xp6(1),t.Oqu(null==a.data?null:a.data.title),t.xp6(3),t.Q6J("formGroup",a.categoriaForm),t.xp6(3),t.Q6J("ngIf",a.checkField("nombre")),t.xp6(2),t.Q6J("formGroup",a.imgCategoriaForm),t.xp6(6),t.Q6J("ngIf",a.URL)("ngIfThen",c)("ngIfElse",i),t.xp6(5),t.Q6J("ngIf",a.URL)("ngIfThen",h)("ngIfElse",d)}},directives:[m.uh,m.xY,l._Y,l.JL,l.sg,v.KE,l.Fj,F.Nt,l.JJ,l.u,l.Q7,A.O5,x.a8,x.dk,v.TO,x.dn,m.H8,I.lW,m.ZT],styles:[".modal-form[_ngcontent-%COMP%]{padding:1rem 0}.modal-form[_ngcontent-%COMP%]   .full-width-input[_ngcontent-%COMP%]{width:100%}input[type=file][_ngcontent-%COMP%]{display:none}.custom-file[_ngcontent-%COMP%]{border:1px solid #ccc;display:inline-block;padding:6px 0;cursor:pointer;width:100%}mat-card[_ngcontent-%COMP%]{max-width:150px;max-height:350px;margin:10px auto 2em 10px;position:absolute}.img-fluid[_ngcontent-%COMP%]{max-width:150px;max-height:150px}.btn-actionsCancel[_ngcontent-%COMP%]{position:absolute;margin-left:250px;margin-top:100px}.btn-actionsSave[_ngcontent-%COMP%]{position:absolute;margin-left:350px;margin-top:100px}"]}),o})();var Q=r(6627);function $(o,n){1&o&&(t.TgZ(0,"th",19),t._uU(1," ID "),t.qZA())}function B(o,n){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.idcategoria," ")}}function H(o,n){1&o&&(t.TgZ(0,"th",19),t._uU(1," NOMBRE "),t.qZA())}function G(o,n){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.nombre," ")}}function z(o,n){1&o&&(t.TgZ(0,"th",19),t._uU(1," FECHA "),t.qZA())}function W(o,n){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.createdAt," ")}}function j(o,n){1&o&&(t.TgZ(0,"th",19),t._uU(1," ID IMAGEN "),t.qZA())}function V(o,n){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.imgcategorias[0].idimgcategoria," ")}}function K(o,n){1&o&&(t.TgZ(0,"th",19),t._uU(1," NOMBRE IMAGEN "),t.qZA())}function X(o,n){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.imgcategorias[0].nombreimgcategoria," ")}}function tt(o,n){1&o&&(t.TgZ(0,"th",19),t._uU(1," IMAGEN "),t.qZA())}function et(o,n){if(1&o&&(t.TgZ(0,"td",20),t._UZ(1,"img",22),t.qZA()),2&o){const e=n.$implicit,a=t.oxw();t.xp6(1),t.Q6J("src",a.URL+e.imgcategorias[0].nombreimgcategoria,t.LSH)}}function ot(o,n){1&o&&(t.TgZ(0,"th",23),t._uU(1," ACCIONES "),t.qZA())}function at(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"div",0),t.TgZ(2,"button",24),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().onOpenModal(c)}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA(),t.qZA(),t.TgZ(5,"button",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().onDelete(c.idcategoria)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function it(o,n){1&o&&t._UZ(0,"tr",26)}function nt(o,n){1&o&&t._UZ(0,"tr",27)}const rt=function(){return[5,10,25,100]},ct=[{path:"",component:(()=>{class o{constructor(e,a){this.categoriaService=e,this.dialogCategoria=a,this.listaCategoria=[],this.URL=`${u.N.API_URL}/img-categoria/`,this.displayedColumns=["idcategoria","nombre","createdAt","idimgcategoria","nombreimgcategoria","linkimgcategoria","actions"],this.dataSource=new g.by,this.destroy$=new O.xQ,this.applyFilter=i=>{this.dataSource.filter=i.trim().toLocaleLowerCase()},this.categoriaService.listen().subscribe(i=>{console.log(i),this.ObtenerListaCategoria()})}ngOnInit(){this.ObtenerListaCategoria()}ObtenerListaCategoria(){this.categoriaService.getTodosCategoria().subscribe(e=>{this.dataSource.data=e,console.log("son las categorias ",e),this.dataSource.paginator=this.paginator})}ngAfterViewInit(){this.dataSource.sort=this.sort}onOpenModal(e={}){this.dialogCategoria.open(R,{height:"400px",width:"600px",hasBackdrop:!1,data:{title:"Nuevo categoria",categorias:e}})}onDelete(e){window.confirm("Esta seguro de eliminar")&&this.categoriaService.deleteCategoria(e).pipe((0,y.R)(this.destroy$)).subscribe(a=>{window.alert(a)})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(w.n),t.Y36(m.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-categoria"]],viewQuery:function(e,a){if(1&e&&(t.Gf(C.YE,5),t.Gf(N.NW,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.sort=i.first),t.iGM(i=t.CRH())&&(a.paginator=i.first)}},decls:30,vars:6,consts:[[1,"table-button-row"],["mat-flat-button","",1,"button-rosado",3,"click"],["appearance","outline","floatLabel","never",1,"search-form-field"],["matInput","","placeholder","Buscar","autocomplete","off",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","idcategoria"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","createdAt"],["mat-cell","","class","center",4,"matCellDef"],["matColumnDef","idimgcategoria"],["matColumnDef","nombreimgcategoria"],["matColumnDef","linkimgcategoria"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","class","actionCampo",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"paginator",3,"pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"center"],[2,"width","50px","height","50px",3,"src"],["mat-header-cell","","mat-sort-header","",1,"actionCampo"],["mat-icon-button","",1,"button-yellow",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return a.onOpenModal()}),t._uU(2,"Crear Categoria"),t.qZA(),t.TgZ(3,"mat-form-field",2),t.TgZ(4,"input",3),t.NdJ("keyup",function(c){return a.applyFilter(c.target.value)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"table",4),t.ynx(6,5),t.YNc(7,$,2,0,"th",6),t.YNc(8,B,2,1,"td",7),t.BQk(),t.ynx(9,8),t.YNc(10,H,2,0,"th",6),t.YNc(11,G,2,1,"td",7),t.BQk(),t.ynx(12,9),t.YNc(13,z,2,0,"th",6),t.YNc(14,W,2,1,"td",10),t.BQk(),t.ynx(15,11),t.YNc(16,j,2,0,"th",6),t.YNc(17,V,2,1,"td",7),t.BQk(),t.ynx(18,12),t.YNc(19,K,2,0,"th",6),t.YNc(20,X,2,1,"td",7),t.BQk(),t.ynx(21,13),t.YNc(22,tt,2,0,"th",6),t.YNc(23,et,2,1,"td",7),t.BQk(),t.ynx(24,14),t.YNc(25,ot,2,0,"th",15),t.YNc(26,at,8,0,"td",7),t.BQk(),t.YNc(27,it,1,0,"tr",16),t.YNc(28,nt,1,0,"tr",17),t.qZA(),t._UZ(29,"mat-paginator",18)),2&e&&(t.xp6(5),t.Q6J("dataSource",a.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,rt))("pageSize",5))},directives:[I.lW,v.KE,F.Nt,g.BZ,C.YE,g.w1,g.fO,g.Dz,g.as,g.nj,N.NW,g.ge,C.nU,g.ev,Q.Hw,g.XQ,g.Gk],styles:["table[_ngcontent-%COMP%]{width:95%;margin:1rem auto 0;table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{overflow:hidden;width:50px;text-overflow:ellipsis;white-space:nowrap}.mat-column-idcategoria[_ngcontent-%COMP%]{flex:none;width:2%}.mat-column-idimgcategoria[_ngcontent-%COMP%]{flex:none;width:1%}.mat-column-nombre[_ngcontent-%COMP%]{flex:none;width:10%}.mat-column-createdAt[_ngcontent-%COMP%]{flex:none;width:10%}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:30%;margin-left:2%}.paginator[_ngcontent-%COMP%]{width:95%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}th.mat-header-cell[_ngcontent-%COMP%]{background-color:#36be58;color:#5e22ce;font-weight:bold;font-family:Arial;text-align:left;max-width:300px}.button-yellow[_ngcontent-%COMP%]{background-color:#13e2e9}.button-rosado[_ngcontent-%COMP%]{color:#fffaf0;background-color:#e014a3;width:15%;left:35px}.table-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:12px}"]}),o})()}];let gt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[b.Bz.forChild(ct)],b.Bz]}),o})();var lt=r(8596);let mt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[A.ez,gt,lt.q,l.u5]]}),o})()}}]);
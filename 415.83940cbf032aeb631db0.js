"use strict";(self.webpackChunkadmincarrito=self.webpackChunkadmincarrito||[]).push([[415],{8415:(pe,x,a)=>{a.r(x),a.d(x,{ProveedorModule:()=>se});var v=a(8583),P=a(4655),M=a(4457),_=a(1494),c=a(2789),N=a(9765),w=a(6782),d=a(3679),p=a(2238),e=a(7716),A=a(3408),C=a(8295),O=a(9983),b=a(1095);function y(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("nombre")," ")}}function q(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("ci_nit")," ")}}function E(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("telefono")," ")}}function U(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("email")," ")}}function D(o,n){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.getErrorMessage("direccion")," ")}}var u=(()=>{return(o=u||(u={})).EDIT="edit",o.NEW="new",u;var o})();let I=(()=>{class o{constructor(t,r){this.data=t,this.proveedorService=r,this.actionTODO=u.NEW,this.isValidEmail=/^(([^<>()\[\]\\.,;:\s@\u201d]+(\.[^<>()\[\]\\.,;:\s@\u201d]+)*)|(\u201c.+\u201d))@((\[[0\u20139]{1,3}\.[0\u20139]{1,3}\.[0\u20139]{1,3}\.[0\u20139]{1,3}])|(([a-zA-Z\-0\u20139]+\.)+[a-zA-Z]{2,}))$/,this.formBuilder=new d.qu,this.proveedorForm=this.formBuilder.group({nombre:["",[d.kI.required]],ci_nit:["",[d.kI.required]],telefono:["",[d.kI.required]],email:["",[d.kI.required,d.kI.pattern(this.isValidEmail)]],direccion:["",[d.kI.required]],fecha:[""],hora:[""]})}ngOnInit(){var t;(null===(t=this.data)||void 0===t?void 0:t.proveedores.hasOwnProperty("idproveedor"))&&(this.actionTODO=u.EDIT,this.data.title="Actualizaci\xf3n proveedor",setTimeout(()=>{this.pathForData()},0))}onSave(){var t,r;const i=(0,v.p6)(new Date,"yyyy-MM-dd","en_US"),l=(0,v.p6)(new Date,"hh:mm:ss","en_US"),m=this.proveedorForm.value;if(this.actionTODO===u.NEW)m.fecha=i,m.hora=l,this.proveedorService.newProveedor(m).subscribe(f=>{}),this.proveedorService.filterProveedor("New proveedor");else{const f=null===(r=null===(t=this.data)||void 0===t?void 0:t.proveedores)||void 0===r?void 0:r.idproveedor;let s=Object.assign({},this.proveedorForm.value);delete s.fecha,delete s.hora,this.proveedorService.updateProveedor(f,s).subscribe(h=>{console.log("Actualizado categoria",h)}),this.proveedorService.filterProveedor("Update Registro proveedores....")}}isValidField(t){return(this.proveedorForm.get(t).touched||this.proveedorForm.get(t).dirty)&&!this.proveedorForm.get(t).valid}getErrorMessage(t){var r;let i;return this.proveedorForm.get(t).errors.required?i=" Este campo es requerido":this.proveedorForm.get(t).hasError("pattern")?i="No es correo v\xe1lido":this.proveedorForm.get(t).hasError("minlength")&&(i=`Este campo requiere un m\xednimo de ${null===(r=this.proveedorForm.get(t).errors)||void 0===r?void 0:r.minlength.requiredLength} caracteres`),i}checkField(t){return this.isValidField(t)}pathForData(){var t,r,i,l,m,f,s,h,Z,T;this.proveedorForm.patchValue({nombre:null===(r=null===(t=this.data)||void 0===t?void 0:t.proveedores)||void 0===r?void 0:r.nombre,ci_nit:null===(l=null===(i=this.data)||void 0===i?void 0:i.proveedores)||void 0===l?void 0:l.ci_nit,telefono:null===(f=null===(m=this.data)||void 0===m?void 0:m.proveedores)||void 0===f?void 0:f.telefono,email:null===(h=null===(s=this.data)||void 0===s?void 0:s.proveedores)||void 0===h?void 0:h.email,direccion:null===(T=null===(Z=this.data)||void 0===Z?void 0:Z.proveedores)||void 0===T?void 0:T.direccion})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(A.z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modalproveedor"]],decls:25,vars:9,consts:[["mat-dialog-title",""],[1,"modal-form"],[3,"formGroup"],[1,"full-width-input"],["formControlName","nombre","matInput","","placeholder","Nombres","required",""],[4,"ngIf"],["formControlName","ci_nit","matInput","","placeholder","Ci/Nit","required",""],["formControlName","telefono","matInput","","placeholder","Tel\xe9fono/Cel","required",""],["formControlName","email","matInput","","placeholder","Correo","required",""],["formControlName","direccion","matInput","","placeholder","Direcci\xf3n","required",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary","ckdFocusInitial","",1,"btn-actionsSave",3,"mat-dialog-close","disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"div",1),e.TgZ(4,"form",2),e.TgZ(5,"mat-form-field",3),e._UZ(6,"input",4),e.YNc(7,y,2,1,"mat-error",5),e.qZA(),e.TgZ(8,"mat-form-field",3),e._UZ(9,"input",6),e.YNc(10,q,2,1,"mat-error",5),e.qZA(),e.TgZ(11,"mat-form-field",3),e._UZ(12,"input",7),e.YNc(13,E,2,1,"mat-error",5),e.qZA(),e.TgZ(14,"mat-form-field",3),e._UZ(15,"input",8),e.YNc(16,U,2,1,"mat-error",5),e.qZA(),e.TgZ(17,"mat-form-field",3),e._UZ(18,"input",9),e.YNc(19,D,2,1,"mat-error",5),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-dialog-actions",10),e.TgZ(21,"button",11),e._uU(22,"Cancelar"),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return r.onSave()}),e._uU(24,"Guardar"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(null==r.data?null:r.data.title),e.xp6(3),e.Q6J("formGroup",r.proveedorForm),e.xp6(3),e.Q6J("ngIf",r.checkField("nombre")),e.xp6(3),e.Q6J("ngIf",r.checkField("ci_nit")),e.xp6(3),e.Q6J("ngIf",r.checkField("telefono")),e.xp6(3),e.Q6J("ngIf",r.checkField("email")),e.xp6(3),e.Q6J("ngIf",r.checkField("direccion")),e.xp6(4),e.Q6J("mat-dialog-close",!0)("disabled",!r.proveedorForm.valid))},directives:[p.uh,p.xY,d._Y,d.JL,d.sg,C.KE,d.Fj,O.Nt,d.JJ,d.u,d.Q7,v.O5,p.H8,b.lW,p.ZT,C.TO],styles:[".modal-form[_ngcontent-%COMP%]{padding:1rem 0}.modal-form[_ngcontent-%COMP%]   .full-width-input[_ngcontent-%COMP%]{width:100%}"]}),o})();var g=a(1102),F=a(1777),S=a.t(F,2),Y=a(6627);function k(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," ID "),e.qZA())}function Q(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.idproveedor," ")}}function R(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," NOMBRE "),e.qZA())}function j(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function B(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," CI/NIT "),e.qZA())}function J(o,n){if(1&o&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.ci_nit," ")}}function $(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," TEL\xc9FONO "),e.qZA())}function H(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.telefono," ")}}function z(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," ESTADO "),e.qZA())}function L(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.estado," ")}}function V(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," CORREO "),e.qZA())}function G(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.email," ")}}function W(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," DIRECCI\xd3N "),e.qZA())}function K(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.direccion," ")}}function X(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," FECHA "),e.qZA())}function ee(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.fecha," ")}}function oe(o,n){1&o&&(e.TgZ(0,"th",23),e._uU(1," HORA "),e.qZA())}function te(o,n){if(1&o&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.hora," ")}}function re(o,n){1&o&&(e.TgZ(0,"th",26),e._uU(1," ACCIONES "),e.qZA())}function ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"td",24),e.TgZ(1,"div",0),e.TgZ(2,"button",27),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().onOpenModal(l)}),e.TgZ(3,"mat-icon"),e._uU(4,"edit"),e.qZA(),e.qZA(),e.TgZ(5,"button",28),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().onDelete(l.idcategoria)}),e.TgZ(6,"mat-icon"),e._uU(7,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}function ie(o,n){1&o&&e._UZ(0,"tr",29)}function ae(o,n){1&o&&e._UZ(0,"tr",30)}const de=function(){return[5,10,25,100]};g.pp.setFonts(S);const le=[{path:"",component:(()=>{class o{constructor(t,r){this.proveedorService=t,this.dialogProducto=r,this.listaCategoria=[],this.displayedColumns=["idproveedor","nombre","ci_nit","telefono","estado","email","direccion","fecha","hora","actions"],this.dataSource=new c.by,this.destroy$=new N.xQ,this.applyFilter=i=>{this.dataSource.filter=i.trim().toLocaleLowerCase()},this.proveedorService.listenProveedor().subscribe(i=>{console.log("probando----------",i),this.ObtenerListaProveedor()})}ngOnInit(){this.ObtenerListaProveedor()}ObtenerListaProveedor(){this.proveedorService.getTodosProveedor().subscribe(t=>{this.dataSource.data=t,console.log("son las proveedores ",t),this.dataSource.paginator=this.paginator})}ngAfterViewInit(){this.dataSource.sort=this.sort}onOpenModal(t={}){this.dialogProducto.open(I,{height:"400px",width:"600px",hasBackdrop:!1,data:{title:"Nuevo proveedor",proveedores:t}})}onDelete(t){window.confirm("Esta seguro de eliminar")&&this.proveedorService.deleteProveedor(t).pipe((0,w.R)(this.destroy$)).subscribe(r=>{window.alert(r)})}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}createPdf(){const t=new g.pp;new g.Txt("MICROMARKET HOME SERVICE").bold().fontSize(20),this.proveedorService.getTodosProveedor().subscribe(r=>{t.pageMargins([50,60]),t.add("MICROMARKET HOME SERVICE"),t.add("DIRECCI\xd3N: Zona Zenkata"),t.add("\n"),t.add(this.createTable(r)),t.create().open()})}createTable(t){return new g.Table([["ID","NOMBRE","CI_NIT","TEL\xc9FONO","EMAIL","FECHA","HORA"],...this.extractData(t)]).end}extractData(t){return t.map(r=>[r.idproveedor,r.nombre,r.ci_nit,r.telefono,r.email,r.fecha,r.hora])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.z),e.Y36(p.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-proveedor"]],viewQuery:function(t,r){if(1&t&&(e.Gf(_.YE,5),e.Gf(M.NW,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.sort=i.first),e.iGM(i=e.CRH())&&(r.paginator=i.first)}},decls:41,vars:6,consts:[[1,"table-button-row"],["mat-flat-button","",1,"button-rosado",3,"click"],["mat-flat-button","",1,"primary",3,"click"],["appearance","outline","floatLabel","never",1,"search-form-field"],["matInput","","placeholder","Buscar","autocomplete","off",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","idproveedor"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","ci_nit"],["mat-cell","","class","center",4,"matCellDef"],["matColumnDef","telefono"],["matColumnDef","estado"],["matColumnDef","email"],["matColumnDef","direccion"],["matColumnDef","fecha"],["matColumnDef","hora"],["matColumnDef","actions"],["mat-header-cell","","mat-sort-header","","class","actionCampo",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"paginator",3,"pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"center"],["mat-header-cell","","mat-sort-header","",1,"actionCampo"],["mat-icon-button","",1,"button-yellow",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return r.onOpenModal()}),e._uU(2,"Crear Proveedor"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.createPdf()}),e._uU(4,"PDF"),e.qZA(),e.TgZ(5,"mat-form-field",3),e.TgZ(6,"input",4),e.NdJ("keyup",function(l){return r.applyFilter(l.target.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"table",5),e.ynx(8,6),e.YNc(9,k,2,0,"th",7),e.YNc(10,Q,2,1,"td",8),e.BQk(),e.ynx(11,9),e.YNc(12,R,2,0,"th",7),e.YNc(13,j,2,1,"td",8),e.BQk(),e.ynx(14,10),e.YNc(15,B,2,0,"th",7),e.YNc(16,J,2,1,"td",11),e.BQk(),e.ynx(17,12),e.YNc(18,$,2,0,"th",7),e.YNc(19,H,2,1,"td",8),e.BQk(),e.ynx(20,13),e.YNc(21,z,2,0,"th",7),e.YNc(22,L,2,1,"td",8),e.BQk(),e.ynx(23,14),e.YNc(24,V,2,0,"th",7),e.YNc(25,G,2,1,"td",8),e.BQk(),e.ynx(26,15),e.YNc(27,W,2,0,"th",7),e.YNc(28,K,2,1,"td",8),e.BQk(),e.ynx(29,16),e.YNc(30,X,2,0,"th",7),e.YNc(31,ee,2,1,"td",8),e.BQk(),e.ynx(32,17),e.YNc(33,oe,2,0,"th",7),e.YNc(34,te,2,1,"td",8),e.BQk(),e.ynx(35,18),e.YNc(36,re,2,0,"th",19),e.YNc(37,ne,8,0,"td",8),e.BQk(),e.YNc(38,ie,1,0,"tr",20),e.YNc(39,ae,1,0,"tr",21),e.qZA(),e._UZ(40,"mat-paginator",22)),2&t&&(e.xp6(7),e.Q6J("dataSource",r.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",r.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(5,de))("pageSize",5))},directives:[b.lW,C.KE,O.Nt,c.BZ,_.YE,c.w1,c.fO,c.Dz,c.as,c.nj,M.NW,c.ge,_.nU,c.ev,Y.Hw,c.XQ,c.Gk],styles:["table[_ngcontent-%COMP%]{width:95%;margin:1rem auto 0;table-layout:fixed}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{overflow:hidden;width:50px;text-overflow:ellipsis;white-space:nowrap}.mat-column-idproveedor[_ngcontent-%COMP%]{flex:none;width:2%}.mat-column-nombre[_ngcontent-%COMP%]{flex:none;width:8%}.mat-column-ci_nit[_ngcontent-%COMP%]{flex:none;width:8%}.mat-column-telefono[_ngcontent-%COMP%]{flex:none;width:7%}.mat-column-estado[_ngcontent-%COMP%]{flex:none;width:5%}.mat-column-email[_ngcontent-%COMP%]{flex:none;width:7%}.mat-column-direccion[_ngcontent-%COMP%]{flex:none;width:7%}.mat-column-fecha[_ngcontent-%COMP%]{flex:none;width:6%}.mat-column-hora[_ngcontent-%COMP%]{flex:none;width:6%}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:30%;margin-left:2%}.paginator[_ngcontent-%COMP%]{width:95%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}th.mat-header-cell[_ngcontent-%COMP%]{background-color:#36be58;color:#5e22ce;font-weight:bold;font-family:Arial;text-align:left;max-width:300px}.button-yellow[_ngcontent-%COMP%]{background-color:#13e2e9}.button-rosado[_ngcontent-%COMP%]{color:#fffaf0;background-color:#e014a3;width:15%;left:35px}.table-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:12px}"]}),o})()}];let ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[P.Bz.forChild(le)],P.Bz]}),o})();var me=a(8596);let se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.ez,ce,me.q]]}),o})()}}]);